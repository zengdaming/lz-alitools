# è¯¢ç›˜çš„æ•°æ®æŸ¥è¯¢æ¥å£è¯´æ˜

## 1.ç½‘é¡µåœ°å€
ã€å•†æœºæ²Ÿé€šã€‘-->ã€è¯¢ç›˜ã€‘

## 2.è·å–æ•°æ®çš„æ–¹æ¡ˆâ­â­

### 2.1.æ€è·¯
1. é€šè¿‡hookçš„æ–¹æ³•ï¼Œè·å¾—**å½“å‰**é¡µé¢çš„è¯¢ç›˜**åŸºæœ¬**æ•°æ®ã€‚
2. ç„¶åé€šè¿‡ã€å®¢æˆ·è¯¦æƒ…æŸ¥è¯¢æ¥å£ã€‘è·å¾—å®¢æˆ·è¯¦æƒ…ï¼ˆa.å®¢æˆ·ç­‰çº§ã€b.å…¬å¸åç§°ã€c.é‚®ç®±åœ°å€ã€d.ç”µè¯å·ç ã€e.æ‰‹æœºå·ç ï¼‰

### 2.2.æ‰€éœ€çš„æ•°æ®
| æ•°æ®å  | æ¥æº                                          | å¤‡æ³¨       |
|---------|-----------------------------------------------|------------|
|äº§å“å›¾   |data.list[i].productInfo[0].imageUrl           | å¯èƒ½æ²¡æœ‰
|äº§å“ID   |data.list[i].productInfo[0].productId          |
|ä¸»é¢˜å   |data.list[i].productInfo[0].subject            |    |
|è¯¢ä»·å•å· |data.list[i].productInfo[0].requestNo          |    |
|è´Ÿè´£äººå |data.list[i].productInfo[0].ownerName          |    |
|åˆ›å»ºæ—¶é—´ |data.list[i].productInfo[0].createTime         | æ—¶é—´æˆ³     |
|æ˜¯å¦åˆ†é… |data.list[i].productInfo[0].distributeStatus   | 2ï¼šå·²åˆ†é…ï¼Œå…¶ä»–ï¼šæœªåˆ†é… |
|å•†æœºæ¥æº |data.list[i].productInfo[0].source             | å¯èƒ½æ²¡æœ‰   |
|å•†æœºåˆ†ç±» |data.list[i].productInfo[0].feedbacktype       | 6ï¼šTMå•†æœºï¼Œå…¶ä»–ï¼šè¯¢ç›˜å•†æœº|
|å®¢æˆ·å   |data.list[i].productInfo[0].sender.name        | å¯èƒ½æ²¡æœ‰   |
|æ‰€å±å›½å®¶ |data.list[i].productInfo[0].sender.countryName | å¯èƒ½æ²¡æœ‰   |
|         |å®¢æˆ·è¯¦æƒ…ï¼Œæ˜¯é€šè¿‡ã€å®¢æˆ·è¯¦æƒ…æŸ¥è¯¢æ¥å£ã€‘è·å¾—çš„     |    |
|å®¢æˆ·ç­‰çº§ |buyerInfo.highQualityLevelTag                  |    |
|å…¬å¸åç§° |buyerInfo.companyName                          |    |
|åº§æœº     |buyerInfo.buyerContactInfo.phoneNumber         |    |
|æ‰‹æœº     |buyerInfo.buyerContactInfo.mobileNumber        |    |
|ç”µå­é‚®ç®± |buyerInfo.buyerContactInfo.email               |    |




## 3.è¯¢ç›˜æ•°æ®æŸ¥è¯¢æ¥å£è¯´æ˜
### 3.1è¯·æ±‚URLï¼ˆPOSTæ–¹æ³•ï¼‰
```
https://message.alibaba.com/message/ajax/feedback/subjectList.htm?ctoken=19zclwcgjc781&dmtrack_pageid=db85f83d2127f75e1698381760
```
### 3.2.å‚æ•°è¯´æ˜
| å‚æ•°å          |  desc        |
|----------------|--------------|
|ctoken          |æŸç§tokenï¼Œæ•°æ®å­˜åœ¨cookieä¸­ï¼Œä½†ä¸æ˜¯å•ç‹¬çš„å˜é‡ä¸­ï¼Œéœ€è¦è§£æ
|dmtrack_pageid  |ğŸ’€ğŸ’€æœªçŸ¥

### 3.3.åˆ†æ
- ã€éš¾ç‚¹ã€‘  
  **éš¾ä»¥è‡ªå·±å‘é€è¯·æ±‚è¯·**ï¼šè¯·æ±‚ä¸­æœ‰æœªçŸ¥çš„å‚æ•°å’Œtokenï¼Œå¯¼è‡´ä¼ªé€ è¯·æ±‚æ¯”è¾ƒéš¾
- ã€è§£å†³æ–¹æ¡ˆã€‘  
  é€šè¿‡Hookçš„æ–¹å¼ï¼Œæˆªèƒ¡æ‰€éœ€æ•°æ®ï¼šå› ä¸ºæ¯æ¬¡è¿›å…¥é¡µé¢ï¼Œéƒ½ä¼šè·å¾—å½“å‰é¡µçš„æ•°æ®ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡hookçš„æ–¹å¼ç›´æ¥æˆªå–ï¼Œè¿™æ ·å°±ä¸ç”¨è‡ªå·±ç»„è£…è¯·æ±‚ã€‚

### 3.4.è¿”å›æ•°æ®
<details>
  <summary>ç‚¹æˆ‘å±•å¼€çœ‹å®Œæ•´æ•°æ®ä¾‹å­</summary>

```json
{
  "code": 200,
  "message": "Operation is successful",
  "postId": "1698381814198",
  "data": {
    "list": [
      [
        {
          "appFrom": "iphone",
          "createTime": 1697281040000,
          "distributeStatus": 0,
          "feedbackId": 20251830371,
          "feedbackType": 1,
          "fillingPercent": "9.00",
          "hasAttachment": false,
          "hasUnread": false,
          "historyInquiry": false,
          "id": 2025183,
          "imInquiry": true,
          "inquiryCount": 1,
          "lastestReplyTime": 1698375344000,
          "mark": "NOT_FOLLOW",
          "messageId": 20248,
          "messageType": "REC",
          "modifiedTime": 1698375344000,
          "newTransactionLink": false,
          "onePageV3": true,
          "ownerId": 24401,
          "ownerName": "Claire Yao",
          "process": "FOLLOW",
          "productInfo": [
            {
              "currency": "USD",
              "id": 2022003,
              "imageUrl": "https:\/\/sc04.alicdn.com\/kf\/H065183ab644846359c9c6977c44abc26c.jpg",
              "productAttr": [],
              "productId": 16002669,
              "productName": "Take away salad ramen soup container rectangular packing boxes kraft paper take out bento bowl lunch fast food box packaging",
              "properties": "{&quot;selectedSKUs&quot;:&quot;[{\\&quot;productId\\&quot;:\\&quot;1600276189669\\&quot;,\\&quot;unit\\&quot;:\\&quot;piece\\&quot;,\\&quot;pluralUnit\\&quot;:\\&quot;pieces\\&quot;,\\&quot;quantityNeeded\\&quot;:\\&quot;2000.00\\&quot;}]&quot;,&quot;productAttr&quot;:&quot;[]&quot;}",
              "quantity": 2000.000,
              "source": "OWNERSOURCING",
              "unit": "piece",
              "url": "https:\/\/www.alibaba.com\/product-detail\/Take-away-salad-ramen-soup-container_1600276189669.html"
            }
          ],
          "readTime": 1698375344000,
          "replyStatus": 1,
          "requestNo": "20251830371",
          "secFeedbackId": "MC1IDX1HTPRWVorJM3PhxqJmyVqjsVUPw4QNQBJ-ao19uiI1UynrBhuhQ94ex3Ae2VXR8cV",
          "secOwnerId": "MC1IDX1TR_6Td_eU66NtZ-3EzkY5fhSMjUQpvGPl6QOBndmeDN1BcnMbtSNIRGgDQQabUt-",
          "secTradeId": "MC1IDX1lQWMyG32s2YNBA8Ss56_du0bHohTaUTv3tlodkHfqeGQYrDS_1aAvxWCks4SnQsu",
          "sender": {
            "accountId": 123,
            "alitalkId": "8pctgRBMALPX+DlyXv8msOFwyQg4TTkNOChAERv2nos=",
            "avatar": "https:\/\/sc04.alicdn.com\/kf\/A5e7e6eedfa1a42b4bd1c49109ada4b322.jpg_50x50.jpg",
            "countryCode": "NG",
            "countryName": "Nigeria",
            "name": "Augustina Orji",
            "secAccountId": "MC1ID12j6l2E53QWWv1cJcmTDdZv-dbojS6l-p_-sADxAEwKY*",
            "vaccountId": 123
          },
          "source": "main_app_detail_sendInquiry",
          "spam": false,
          "subject": "Inquiry from Product Details Page",
          "targetIds": [
            123
          ],
          "tradeId": 123,
          "unreadCount": 0
        }
      ]
    ],
    "pagination": {
      "currentPage": 1,
      "nextPage": 2,
      "pageSize": 20,
      "totalCount": 2947
    },
    "toBeConfirmedItems": 0
  }
}
```
</details>


## 4.å®¢æˆ·è¯¦æƒ…è¯·æ±‚æ¥å£è¯´æ˜
### 4.1.è¯·æ±‚URLï¼ˆGETæ–¹æ³•ï¼‰
```
https://alicrm.alibaba.com/jsonp/customerPluginQueryServiceI/queryCustomerInfo.json?buyerAccountId=${buyerAccountId}&_tb_token_=${tb_token}
```
### 4.2.å‚æ•°è¯´æ˜
- **buyerAccountId**ï¼šè¦æŸ¥è¯¢çš„å®¢æˆ·çš„idï¼Œæ¥æºäºã€è¯¢ç›˜æ•°æ®æŸ¥è¯¢æ¥å£ã€‘çš„`sender.secAccountId`
- **_tb_token_**ï¼šæŸç§tokenï¼Œæ•°æ®å­˜åœ¨cookie['_tb_token_']

### 4.3 è¿”å›çš„æ•°æ®
  æœ‰ç”¨çš„æ•°æ®æ˜¯:data.data.buyerInfo
  <details>
  <summary>å®Œæ•´æ•°æ®ä¾‹å­</summary>

  ```JSON
  {
    "success": true,
    "data": {
      "data": {
        "customerType": "WAIT_TO_ADD_CUSTOMER",
        "hasCreatedCouponPrivilege": true,
        "status": "enabled",
        "alicrmCustomerInfo": {
          "customerId": null,
          "repurchaseCustomer": false,
          "ownerName": null,
          "willLoss": false,
          "potentialScore": "-1",
          "firstName": null,
          "lastName": null,
          "email": null,
          "mobileNumber": null,
          "phoneNumber": null,
          "companyName": null,
          "companyWebSite": null,
          "customerGroup": null,
          "importanceLevel": null,
          "wangwangid": null,
          "contractId": null,
          "noteLabel": null,
          "noteCode": null,
          "parentNoteCode": null,
          "noteContent": null,
          "contentCode": null,
          "scoreInContent": null,
          "taOrderCount": 0,
          "taTotalAmount": 0,
          "taLastBuyPast": null,
          "rebuy": false,
          "orderNo": null,
          "annualProcurement": null,
          "businessTypes": null,
          "marketingGroups": null,
          "categorys": null
        },
        "buyerInfo": {
          "firstName": "xxxxx",
          "lastName": "yyyyy",
          "potentialScore": null,
          "headerFullPath": null,
          "headerSmallPath": null,
          "country": "ZW",
          "levelTag": "C",
          "registerDate": 1581158820,
          "companyName": "Print Smart",
          "companyWebSite": null,
          "productViewCount": 23,
          "validInquiryCount": 1,
          "repliedInquiryCount": 1,
          "validRfqCount": 0,
          "loginDays": 15,
          "spamInquiryMarkedBySupplierCount": 0,
          "addedToBlacklistCount": 0,
          "totalOrderCount": -1,
          "totalOrderVolume": -1,
          "tradeSupplierCount": -1,
          "isGoldenBuyer": null,
          "goldenBuyerLogo": null,
          "encryptAccountId": "123-SuN",
          "highQualityLevelTag": "L1+",
          "businessTypes": [
            "Other"
          ],
          "salesTypes": null,
          "buyerContactInfo": {
            "visible": true,
            "applyStatus": null,
            "email": "printsmartplot@gmail.com",
            "mobileNumber": null,
            "phoneNumber": "00263-04-750668"
          },
          "searchWords": [
            "*"
          ],
          "preferredIndustries": [
            "Solar Panels",
            "Fencing, Trellis & Gates",
            "Energy Storage Battery",
            "Solar Energy System",
            "Iron Wire Mesh"
          ],
          "lastestRfqList": null,
          "latestInquiryProducts": [
            "https://sc04.alicdn.com/kf/H3a489e1e08cb449bb00c1b994efcf8bbA.jpg"
          ],
          "buyerShopBehaviorInfo": null
        },
        "extValues": {},
        "isAdmin": true,
        "isGgsOrIfm": false,
        "isCGS": true
      }
    },
    "message": "",
    "code": ""
  }
  ```
  </details>